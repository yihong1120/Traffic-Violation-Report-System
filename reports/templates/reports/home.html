{% extends "base.html" %}

{% block content %}
<h2>Welcome to Traffic Violation Report System</h2>

{% if request.user.is_authenticated %}
    <p>Hello, {{ request.user.username }}!</p>
    <a href="{% url 'logout' %}">Logout</a>
{% else %}
    <p>Please <a href="{% url 'login' %}">login</a> to continue.</p>
{% endif %}

<div id="map-container" style="height: 400px; width: 100%;">
    <div id="map" style="height: 100%;"></div>
</div>

<script>
function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: 23.6978, lng: 120.9605},
        zoom: 8,
        mapTypeId: 'roadmap'
    });

    // BigQuery 数据
    var data = [
        {
            lat: 24.1548216,
            lng: 120.6822014,
            title: 'Traffic Violation',
        },
        // Add more data points as needed
    ];

    // 标记地图上的位置
    for (var i = 0; i < data.length; i++) {
        var marker = new google.maps.Marker({
            position: {lat: data[i].lat, lng: data[i].lng},
            map: map,
            title: data[i].title
        });
    }
}
</script>

<!-- 引入 Google Maps API -->
<script src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLE_MAPS_API_KEY }}&callback=initMap" async defer></script>

{% endblock %}
